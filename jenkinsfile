pipeline {
    agent any 
    stages {
        stage('pull github sc') {
             
            steps {
                git url: 'https://github.com/aakkiiff/java_docker_jenkins_task001'
            }
        }
        stage('docker build push') { 
            steps {
              
                sh 'mvn clean package'


                withCredentials([usernamePassword(credentialsId: 'test', passwordVariable: 'pwd', usernameVariable: 'uname')]) {
                    sh "docker login -u ${env.uname} -p ${env.pwd}"
                    sh 'docker build --no-cache -t akifboi/properties_task:1 .'
                    echo "building images done"

                    echo "push images to dockerhub"
                    sh 'docker push akifboi/properties_task:1'
                }

                sh 'docker logout'
            }
        }
        
        
       
    }
    
}